# PostgreSQL
POSTGRES_VERSION=18
POSTGRES_DB=myapp
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme

# Backup Schedule (cron format)
# Default: every hour
BACKUP_SCHEDULE=0 * * * *

# Cleanup Schedule (cron format)
# Default: daily at 1 AM
CLEANUP_SCHEDULE=0 1 * * *

# ======================================================================
# Retention Policy Configuration
# ======================================================================
# Policies are ORed - a backup matching ANY policy is kept.
# Inspired by Restic's retention model.
#
# With hourly backups, steady-state after 2+ years: ~39 backups retained
# ======================================================================

# Keep the N most recent backups regardless of time
RETENTION_KEEP_LAST=3

# Keep one backup per hour for the last N hours
RETENTION_KEEP_HOURLY=24

# Keep one backup per day for the last N days
RETENTION_KEEP_DAILY=7

# Keep one backup per week for the last N weeks
RETENTION_KEEP_WEEKLY=4

# Keep one backup per month for the last N months
RETENTION_KEEP_MONTHLY=6

# Keep one backup per year for the last N years
RETENTION_KEEP_YEARLY=2

# Minimum number of backups to keep (safety net)
# Cleanup will never delete below this threshold
RETENTION_MIN_BACKUPS=1

# Preview mode - set to true to see what would be deleted without actually deleting
RETENTION_DRY_RUN=false

# S3 Configuration
S3_ENDPOINT=http://garage:3900
S3_BUCKET=backups
# Note: Garage keys must start with "GK" followed by 24 hex characters
S3_ACCESS_KEY=GK0123456789abcdef01234567
S3_SECRET_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
